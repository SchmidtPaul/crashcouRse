col.rep.2 <- data.table(rep=2, N=seq(1:6), col2=c(4,2,1,6,3,5)+6 )
col.rep.3 <- data.table(rep=3, N=seq(1:6), col3=c(4,5,3,1,6,2)+12)
rice <- merge(rice, col.rep.1, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.2, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.3, by=c("rep", "N"), all.x=T)
rice[, `:=` (col=col1+col2+col3)]
rice
rice[, `:=` (col=sum(col1,col2,col3, na.rm=T), col1=NULL, col2=NULL, col3=NULL)]
rice
rice[, `:=` (col=sum(col1,col2,col3, na.rm=T), col1=NULL, col2=NULL, col3=NULL), by=row]
rm(list=ls())
rice <- fread("D:/RKurse/DataPiepho/rice.dat.txt")
rice <- rice[, c(1,2,3,5)]
names(rice) <- c("rep", "N", "G", "yield")
#rice[, col := as.numeric(NA)]
# Manually obtain column numbers from Piepho's mixed model script
col.rep.1 <- data.table(rep=1, N=seq(1:6), col1=c(1,2,5,3,6,4)   )
col.rep.2 <- data.table(rep=2, N=seq(1:6), col2=c(4,2,1,6,3,5)+6 )
col.rep.3 <- data.table(rep=3, N=seq(1:6), col3=c(4,5,3,1,6,2)+12)
rice <- merge(rice, col.rep.1, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.2, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.3, by=c("rep", "N"), all.x=T)
rice[, `:=` (col=sum(col1,col2,col3, na.rm=T), col1=NULL, col2=NULL, col3=NULL), by=row]
rice
rice[, `:=` (col=rowSums(.SD, na.rm=T),
col1=NULL, col2=NULL, col3=NULL),
.SDcols=c("col1", "col2", "col3"), by=row]
rm(list=ls())
rice <- fread("D:/RKurse/DataPiepho/rice.dat.txt")
rice <- rice[, c(1,2,3,5)]
names(rice) <- c("rep", "N", "G", "yield")
#rice[, col := as.numeric(NA)]
# Manually obtain column numbers from Piepho's mixed model script
col.rep.1 <- data.table(rep=1, N=seq(1:6), col1=c(1,2,5,3,6,4)   )
col.rep.2 <- data.table(rep=2, N=seq(1:6), col2=c(4,2,1,6,3,5)+6 )
col.rep.3 <- data.table(rep=3, N=seq(1:6), col3=c(4,5,3,1,6,2)+12)
rice <- merge(rice, col.rep.1, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.2, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.3, by=c("rep", "N"), all.x=T)
rice[, `:=` (col=rowSums(.SD, na.rm=T),
col1=NULL, col2=NULL, col3=NULL),
.SDcols=c("col1", "col2", "col3"), by=row]
rice[, `:=` (col=rowSums(.SD, na.rm=T),
col1=NULL, col2=NULL, col3=NULL),
.SDcols=.("col1", "col2", "col3"), by=row]
rice[, col := rowSums(.SD, na.rm=T), .SDcols=c("col1", "col2", "col3")]
rm(list=ls())
rice <- fread("D:/RKurse/DataPiepho/rice.dat.txt")
rice <- rice[, c(1,2,3,5)]
names(rice) <- c("rep", "N", "G", "yield")
#rice[, col := as.numeric(NA)]
# Manually obtain column numbers from Piepho's mixed model script
col.rep.1 <- data.table(rep=1, N=seq(1:6), col1=c(1,2,5,3,6,4)   )
col.rep.2 <- data.table(rep=2, N=seq(1:6), col2=c(4,2,1,6,3,5)+6 )
col.rep.3 <- data.table(rep=3, N=seq(1:6), col3=c(4,5,3,1,6,2)+12)
rice <- merge(rice, col.rep.1, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.2, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.3, by=c("rep", "N"), all.x=T)
rice[, col := rowSums(.SD, na.rm=T), .SDcols=c("col1", "col2", "col3")]
rice
rm(list=ls())
rice <- fread("D:/RKurse/DataPiepho/rice.dat.txt")
rice <- rice[, c(1,2,3,5)]
names(rice) <- c("rep", "N", "G", "yield")
#rice[, col := as.numeric(NA)]
# Manually obtain column numbers from Piepho's mixed model script
col.rep.1 <- data.table(rep=1, N=seq(1:6), col1=c(1,2,5,3,6,4)   )
col.rep.2 <- data.table(rep=2, N=seq(1:6), col2=c(4,2,1,6,3,5)+6 )
col.rep.3 <- data.table(rep=3, N=seq(1:6), col3=c(4,5,3,1,6,2)+12)
rice <- merge(rice, col.rep.1, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.2, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.3, by=c("rep", "N"), all.x=T)
rice[, col := rowSums(.SD, na.rm=T), .SDcols=c("col1", "col2", "col3")]
rice[, `:=` (col1=NULL, col2=NULL, col3=NULL)]
rice
rm(list=ls())
rice <- fread("D:/RKurse/DataPiepho/rice.dat.txt")
rice <- rice[, c(1,2,3,5)]
names(rice) <- c("rep", "N", "G", "yield")
#rice[, col := as.numeric(NA)]
# Manually obtain column numbers from Piepho's mixed model script
col.rep.1 <- data.table(rep=1, N=seq(1:6), col1=c(1,2,5,3,6,4)   )
col.rep.2 <- data.table(rep=2, N=seq(1:6), col2=c(4,2,1,6,3,5)+6 )
col.rep.3 <- data.table(rep=3, N=seq(1:6), col3=c(4,5,3,1,6,2)+12)
rice <- merge(rice, col.rep.1, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.2, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.3, by=c("rep", "N"), all.x=T)
rice[, col := rowSums(.SD, na.rm=T), .SDcols=c("col1", "col2", "col3")]
rice[, `:=` (col1=NULL, col2=NULL, col3=NULL)]
rice[, mainplot := as.factor(paste0("mp", col))]
rice
# Manually obtain row numbers from Piepho's mixed model script
row.rep.1 <- c(4,2,1,3,
2,4,3,1,
1,3,4,2,
2,4,1,3,
2,1,3,4,
1,3,4,2) %>% data.table(rep=1, row=., G=rep(seq(1:4),6), col=sort(rep(0+seq(1:6),4)))
row.rep.2 <- c(2,1,4,3,
4,1,3,2,
4,1,2,3,
3,4,2,1,
2,4,1,3,
1,4,2,3) %>% data.table(rep=2, row=., G=rep(seq(1:4),6), col=sort(rep(6+seq(1:6),4)))
row.rep.3 <- c(1,3,4,2,
1,2,4,3,
4,3,2,1,
1,4,2,3,
1,3,4,2,
2,4,1,3) %>% data.table(rep=3, row=., G=rep(seq(1:4),6), col=sort(rep(12+seq(1:6),4)))
row.info <- rbind(row.rep.1, row.rep.2, row.rep.3)
rice <- merge(rice, row.info, by=c("rep", "G", "col"))
setcolorder(rice, c("row", "col", "rep", "mainplot", "N", "G", "yield"))
rice$G   <- rice$G   %>% as.factor;      levels(rice$G) <- c("A", "B", "C", "D")
rice$N   <- rice$N   %>% paste0("N",.)   %>% as.factor
rice$rep <- rice$rep %>% paste0("rep",.) %>% as.factor
head(rice)
library(desplot)
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, shorten="no", col = N,
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, shorten="no", col = N,
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ row+col|rep, flip=T,
text=G, cex=1, shorten="no", col = N,
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, shorten="no", col = N,
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
fwrite(rice, "D:/RKurse/Dokumentation/crashcouRse/datasets/rice split plot.txt", sep="\t")
rm(list=ls())
rice <- fread("D:/RKurse/DataPiepho/rice.dat.txt")
rice <- rice[, c(1,2,3,5)]
names(rice) <- c("rep", "N", "G", "yield")
#rice[, col := as.numeric(NA)]
# Manually obtain column numbers from Piepho's mixed model script
col.rep.1 <- data.table(rep=1, N=seq(1:6), col1=c(1,2,5,3,6,4)   )
col.rep.2 <- data.table(rep=2, N=seq(1:6), col2=c(4,2,1,6,3,5)+6 )
col.rep.3 <- data.table(rep=3, N=seq(1:6), col3=c(4,5,3,1,6,2)+12)
rice <- merge(rice, col.rep.1, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.2, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.3, by=c("rep", "N"), all.x=T)
rice[, col := rowSums(.SD, na.rm=T), .SDcols=c("col1", "col2", "col3")]
rice[, `:=` (col1=NULL, col2=NULL, col3=NULL)]
rice[, mainplot := as.factor(paste0("mp", col))]
# Manually obtain row numbers from Piepho's mixed model script
row.rep.1 <- c(4,2,1,3,
2,4,3,1,
1,3,4,2,
2,4,1,3,
2,1,3,4,
1,3,4,2) %>% data.table(rep=1, row=., G=rep(seq(1:4),6), col=sort(rep(0+seq(1:6),4)))
row.rep.2 <- c(2,1,4,3,
4,1,3,2,
4,1,2,3,
3,4,2,1,
2,4,1,3,
1,4,2,3) %>% data.table(rep=2, row=., G=rep(seq(1:4),6), col=sort(rep(6+seq(1:6),4)))
row.rep.3 <- c(1,3,4,2,
1,2,4,3,
4,3,2,1,
1,4,2,3,
1,3,4,2,
2,4,1,3) %>% data.table(rep=3, row=., G=rep(seq(1:4),6), col=sort(rep(12+seq(1:6),4)))
row.info <- rbind(row.rep.1, row.rep.2, row.rep.3)
rice <- merge(rice, row.info, by=c("rep", "G", "col"))
setcolorder(rice, c("row", "col", "rep", "mainplot", "N", "G", "yield"))
rice$G   <- rice$G   %>% as.factor;      levels(rice$G) <- c("A", "B", "C", "D")
rice$N   <- rice$N   %>% paste0("N",.)   %>% as.factor
rice$rep <- rice$rep %>% paste0("rep",.) %>% as.factor
head(rice)
fwrite(rice, "D:/RKurse/Dokumentation/crashcouRse/datasets/rice split plot.txt", sep="\t")
library(desplot)
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=brewer.pal(3, "Blues"),
col.text=brewer.pal(3, "Set3"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
library(RColorBrewer)
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=brewer.pal(3, "Blues"),
col.text=brewer.pal(3, "Set3"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=brewer.pal(3, "Greys"),
col.text=brewer.pal(3, "Set3"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=brewer.pal(3, "Greys"),
col.text=brewer.pal(3, "Dark2"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=brewer.pal(3, "Greys"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=brewer.pal(3, "Greys"),
col.text=brewer.pal(6, "Set3"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=brewer.pal(3, "Pasetl2"),
col.text=brewer.pal(6, "Set3"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=brewer.pal(3, "Pastel2"),
col.text=brewer.pal(6, "Set3"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=brewer.pal(3, "Pastel2"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey20", "grey35", "grey50"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey90", "grey75", "grey60"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey95", "grey85", "grey75"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey85", "grey75"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= 1 ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= 1 ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
#col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
library(RColorBrewer)
desplot(data=rice, form=  ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
#col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan",
xlab="", ylab="",  out1=rep,
out2=mainplot, out2.gpar=list(col="black"))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan",
xlab="", ylab="",  out1=row,
out2=mainplot, out2.gpar=list(col="black"))
rm(list=ls())
rice <- fread("D:/RKurse/DataPiepho/rice.dat.txt")
rice <- rice[, c(1,2,3,5)]
names(rice) <- c("rep", "N", "G", "yield")
#rice[, col := as.numeric(NA)]
# Manually obtain column numbers from Piepho's mixed model script
col.rep.1 <- data.table(rep=1, N=seq(1:6), col1=c(1,2,5,3,6,4)   )
col.rep.2 <- data.table(rep=2, N=seq(1:6), col2=c(4,2,1,6,3,5)+6 )
col.rep.3 <- data.table(rep=3, N=seq(1:6), col3=c(4,5,3,1,6,2)+12)
rice <- merge(rice, col.rep.1, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.2, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.3, by=c("rep", "N"), all.x=T)
rice[, col := rowSums(.SD, na.rm=T), .SDcols=c("col1", "col2", "col3")]
rice[, `:=` (col1=NULL, col2=NULL, col3=NULL)]
rice[, mainplot := as.factor(paste0("mp", col))]
# Manually obtain row numbers from Piepho's mixed model script
row.rep.1 <- c(4,2,1,3,
2,4,3,1,
1,3,4,2,
2,4,1,3,
2,1,3,4,
1,3,4,2) %>% data.table(rep=1, row=., G=rep(seq(1:4),6), col=sort(rep(0+seq(1:6),4)))
row.rep.2 <- c(2,1,4,3,
4,1,3,2,
4,1,2,3,
3,4,2,1,
2,4,1,3,
1,4,2,3) %>% data.table(rep=2, row=., G=rep(seq(1:4),6), col=sort(rep(6+seq(1:6),4)))
row.rep.3 <- c(1,3,4,2,
1,2,4,3,
4,3,2,1,
1,4,2,3,
1,3,4,2,
2,4,1,3) %>% data.table(rep=3, row=., G=rep(seq(1:4),6), col=sort(rep(12+seq(1:6),4)))
row.info <- rbind(row.rep.1, row.rep.2, row.rep.3)
rice <- merge(rice, row.info, by=c("rep", "G", "col"))
setcolorder(rice, c("row", "col", "rep", "mainplot", "N", "G", "yield"))
rice$G   <- rice$G   %>% as.factor;      levels(rice$G) <- c("A", "B", "C", "D")
rice$N   <- rice$N   %>% paste0("N",.)   %>% as.factor
rice$rep <- rice$rep %>% paste0("rep",.) %>% as.factor
head(rice)
fwrite(rice, "D:/RKurse/Dokumentation/crashcouRse/datasets/rice split plot.txt", sep="\t")
library(desplot)
library(RColorBrewer)
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan",
xlab="", ylab="",
out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan", xlab="", ylab="", key.cex = 0.2,
out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan", xlab="", ylab="", key.cex = 0.6, strip.cex = 2,
out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
---
title: "Two-Factor ANOVA - split-plot-design"
---
# Datensatz
```{r, echo=FALSE, warning=FALSE, message=FALSE, error=FALSE}
library(data.table)
library(desplot) # plotte Feldplan
library(RColorBrewer) # Farben für Feldplan
rice <- fread("datasets/rice split plot.txt", sep="\t")
```
```{r, warning=FALSE, message=FALSE, error=FALSE}
library(data.table) # bessere Datenmanipulation
library(ggplot2) # bessere Plots
library(emmeans) # adjustierte Mittelwerte
library(lme4); library(lmerTest) # gemischtes Modell
```
<div class = "row"> <div class = "col-md-6">
```{r, echo=F, fig.height = 4, fig.width = 4, fig.align = "center"}
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=0.6, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan", key.cex = 0.5
out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
rice <- rice[,c("N", "G", "rep", "mainplot", "yield")]
```
</div> <div class = "col-md-6">
```{r}
print(rice, nrows=10)
```
</div> </div>
rm(list=ls())
rice <- fread("D:/RKurse/DataPiepho/rice.dat.txt")
rice <- rice[, c(1,2,3,5)]
names(rice) <- c("rep", "N", "G", "yield")
#rice[, col := as.numeric(NA)]
# Manually obtain column numbers from Piepho's mixed model script
col.rep.1 <- data.table(rep=1, N=seq(1:6), col1=c(1,2,5,3,6,4)   )
col.rep.2 <- data.table(rep=2, N=seq(1:6), col2=c(4,2,1,6,3,5)+6 )
col.rep.3 <- data.table(rep=3, N=seq(1:6), col3=c(4,5,3,1,6,2)+12)
rice <- merge(rice, col.rep.1, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.2, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.3, by=c("rep", "N"), all.x=T)
rice[, col := rowSums(.SD, na.rm=T), .SDcols=c("col1", "col2", "col3")]
rice[, `:=` (col1=NULL, col2=NULL, col3=NULL)]
rice[, mainplot := as.factor(paste0("mp", col))]
# Manually obtain row numbers from Piepho's mixed model script
row.rep.1 <- c(4,2,1,3,
2,4,3,1,
1,3,4,2,
2,4,1,3,
2,1,3,4,
1,3,4,2) %>% data.table(rep=1, row=., G=rep(seq(1:4),6), col=sort(rep(0+seq(1:6),4)))
row.rep.2 <- c(2,1,4,3,
4,1,3,2,
4,1,2,3,
3,4,2,1,
2,4,1,3,
1,4,2,3) %>% data.table(rep=2, row=., G=rep(seq(1:4),6), col=sort(rep(6+seq(1:6),4)))
row.rep.3 <- c(1,3,4,2,
1,2,4,3,
4,3,2,1,
1,4,2,3,
1,3,4,2,
2,4,1,3) %>% data.table(rep=3, row=., G=rep(seq(1:4),6), col=sort(rep(12+seq(1:6),4)))
row.info <- rbind(row.rep.1, row.rep.2, row.rep.3)
rice <- merge(rice, row.info, by=c("rep", "G", "col"))
setcolorder(rice, c("row", "col", "rep", "mainplot", "N", "G", "yield"))
rice$G   <- rice$G   %>% as.factor;      levels(rice$G) <- c("A", "B", "C", "D")
rice$N   <- rice$N   %>% paste0("N",.)   %>% as.factor
rice$rep <- rice$rep %>% paste0("rep",.) %>% as.factor
head(rice)
fwrite(rice, sep="\t", "D:/RKurse/Dokumentation/crashcouRse/datasets/rice split plot.txt")
save(rice,        file="D:/RKurse/Dokumentation/crashcouRse/datasets/rice split plot.rda")
#
# library(desplot)
# library(RColorBrewer)
# desplot(data=rice, form= rep ~ col+row|rep, flip=T,
#         text=G, cex=1, col=N,
#         col.regions=c("grey100", "grey90", "grey80"),
#         col.text=brewer.pal(6, "Dark2"),
#         main="Feldplan", xlab="", ylab="",
#         out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
#         out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
load("D:/RKurse/Dokumentation/crashcouRse/datasets/rice split plot.rda")
setwd("D:/RKurse/Dokumentation/crashcouRse")
library("rmarkdown")
rmarkdown::clean_site()  # delete old files
rmarkdown::render_site(encoding="UTF-8") # render all files new; UTF-8 for ä, ö, ü, ß
# Mehr Infos
# Split Plot:
#   Bailey (2008) 8.3 + 8.4
#   Dean & Voss (1998) 2.44 + 19
#   Quinn & Keough (2002) 11.1
setwd("D:/RKurse/Dokumentation/crashcouRse")
library("rmarkdown")
rmarkdown::clean_site()  # delete old files
rmarkdown::render_site(encoding="UTF-8") # render all files new; UTF-8 for ä, ö, ü, ß
# Mehr Infos
# Split Plot:
#   Bailey (2008) 8.3 + 8.4
#   Dean & Voss (1998) 2.44 + 19
#   Quinn & Keough (2002) 11.1
setwd("D:/RKurse/Dokumentation/crashcouRse")
library("rmarkdown")
rmarkdown::clean_site()  # delete old files
rmarkdown::render_site(encoding="UTF-8") # render all files new; UTF-8 for ä, ö, ü, ß
# Mehr Infos
# Split Plot:
#   Bailey (2008) 8.3 + 8.4
#   Dean & Voss (1998) 2.44 + 19
#   Quinn & Keough (2002) 11.1
setwd("D:/RKurse/Dokumentation/crashcouRse")
library("rmarkdown")
rmarkdown::clean_site()  # delete old files
rmarkdown::render_site(encoding="UTF-8") # render all files new; UTF-8 for ä, ö, ü, ß
# Mehr Infos
# Split Plot:
#   Bailey (2008) 8.3 + 8.4
#   Dean & Voss (1998) 2.44 + 19
#   Quinn & Keough (2002) 11.1
