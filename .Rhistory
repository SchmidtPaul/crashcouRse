N  =c("N1", "N2", "N1", "N2"))
types <- c("Keine",
"Sorte",
"N",
"Sorte & N (additiv)",
"Sorte & N Interaktion")
mu   <- data.table(type=types[1], temp, mean=c(4,4,4,4)); mu$N  <- "N1 & N2"
var  <- data.table(type=types[2], temp, mean=c(2,2,6,6)); var$N <- "N1 & N2"
N    <- data.table(type=types[3], temp, mean=c(3,5,3,5))
Nvar <- data.table(type=types[4], temp, mean=c(1,3,5,7))
Int  <- data.table(type=types[5], temp, mean=c(5,3,1,7))
twoway <- rbind(mu, var, N, Nvar, Int)
twoway[, Comb := paste0(Var,"-",N)]
twoway$N    <- factor(twoway$N,    levels=c("N1 & N2", "N1", "N2"))
twoway$type <- factor(twoway$type, levels=types)
ggplot(data=twoway, aes(y=mean, x=Var, col=N, group = N)) +
geom_point(size=3) + geom_line(alpha=0.5, linetype="dotted", size=1) +
scale_color_manual(values=farben) +
geom_hline(yintercept=4, col="gray", linetype="dashed") +
ylim(0,8) +
facet_wrap( ~ type, ncol = 2) +
theme_bw() + theme(panel.grid = element_blank(),
legend.position = c(0.75, 0.1)) +
labs(y="Mittlerer Ertrag", x="Sorte")
rm(list=ls())
library(data.table)
library(RColorBrewer)
farben <- c("#AD009F", "#F80012", "#4512AE")
temp <- data.table(Var=c("A", "A", "B", "B"),
N  =c("N1", "N2", "N1", "N2"))
types <- c("Keine",
"Sorte",
"N",
"Sorte & N (additiv)",
"Sorte & N Interaktion")
mu   <- data.table(type=types[1], temp, mean=c(4,4,4,4)); mu$N  <- "N1 & N2"
var  <- data.table(type=types[2], temp, mean=c(2,2,6,6)); var$N <- "N1 & N2"
N    <- data.table(type=types[3], temp, mean=c(3,5,3,5))
Nvar <- data.table(type=types[4], temp, mean=c(1,3,5,7))
Int  <- data.table(type=types[5], temp, mean=c(5,3,1,7))
twoway <- rbind(mu, var, N, Nvar, Int)
twoway[, Comb := paste0(Var,"-",N)]
twoway$N    <- factor(twoway$N,    levels=c("N1 & N2", "N1", "N2"))
twoway$type <- factor(twoway$type, levels=types)
ggplot(data=twoway, aes(y=mean, x=Var, col=N, group = N)) +
geom_point(size=3) + geom_line(alpha=0.5, linetype="dotted", size=1) +
scale_color_manual(values=farben) +
geom_hline(yintercept=4, col="gray", linetype="dashed") +
ylim(0,8) +
facet_wrap( ~ type, ncol = 2) +
theme_bw() + theme(panel.grid = element_blank(),
legend.position = c(0.75, 0.15)) +
labs(y="Mittlerer Ertrag", x="Sorte")
rm(list=ls())
library(data.table)
library(RColorBrewer)
farben <- c("#AD009F", "#F80012", "#4512AE")
temp <- data.table(Var=c("A", "A", "B", "B"),
N  =c("N1", "N2", "N1", "N2"))
types <- c("Keine",
"Sorte",
"N",
"Sorte & N (additiv)",
"Sorte & N Interaktion")
mu   <- data.table(type=types[1], temp, mean=c(4,4,4,4)); mu$N  <- "N1 & N2"
var  <- data.table(type=types[2], temp, mean=c(2,2,6,6)); var$N <- "N1 & N2"
N    <- data.table(type=types[3], temp, mean=c(3,5,3,5))
Nvar <- data.table(type=types[4], temp, mean=c(1,3,5,7))
Int  <- data.table(type=types[5], temp, mean=c(5,3,1,7))
twoway <- rbind(mu, var, N, Nvar, Int)
twoway[, Comb := paste0(Var,"-",N)]
twoway$N    <- factor(twoway$N,    levels=c("N1 & N2", "N1", "N2"))
twoway$type <- factor(twoway$type, levels=types)
ggplot(data=twoway, aes(y=mean, x=Var, col=N, group = N)) +
geom_point(size=3) + geom_line(alpha=0.5, linetype="dotted", size=1) +
scale_color_manual(values=farben) +
geom_hline(yintercept=4, col="gray", linetype="dashed") +
ylim(0,8) +
facet_wrap( ~ type, ncol = 2) +
theme_bw() + theme(panel.grid = element_blank(),
legend.title = element_blank(),
legend.position = c(0.75, 0.15)) +
labs(y="Mittlerer Ertrag", x="Sorte")
str(twoway)
rm(list=ls())
library(data.table)
library(RColorBrewer)
farben <- c("#AD009F", "#F80012", "#4512AE")
temp <- data.table(Var=c("A", "A", "B", "B"),
N  =c("N1", "N2", "N1", "N2"))
types <- c("Keine",
"Sorte",
"N",
"Sorte & N (additiv)",
"Sorte & N Interaktion")
mu   <- data.table(type=types[1], temp, mean=c(4,4,4,4)); mu$N  <- "N1 & N2"
var  <- data.table(type=types[2], temp, mean=c(2,2,6,6)); var$N <- "N1 & N2"
N    <- data.table(type=types[3], temp, mean=c(3,5,3,5))
Nvar <- data.table(type=types[4], temp, mean=c(1,3,5,7))
Int  <- data.table(type=types[5], temp, mean=c(5,3,1,7))
twoway <- rbind(mu, var, N, Nvar, Int)
twoway[, Comb := paste0(Var,"-",N)]
twoway$N    <- factor(twoway$N,    levels=c("N1 & N2", "N1", "N2"))
twoway$type <- factor(twoway$type, levels=types)
# ggplot(data=twoway, aes(y=mean, x=Var, col=N, group = N)) +
#   geom_point(size=3) + geom_line(alpha=0.5, linetype="dotted", size=1) +
#   scale_color_manual(values=farben) +
#   geom_hline(yintercept=4, col="gray", linetype="dashed") +
#   ylim(0,8) + facet_wrap( ~ type, ncol = 2) +
#   theme_bw() + theme(panel.grid = element_blank(),
#                      legend.title = element_blank(),
#                      legend.position = c(0.75, 0.15)) +
#   labs(y="Mittlerer Ertrag", x="Sorte")
fwrite(twoway, sep="\t", "D:/RKurse/Dokumentation/crashcouRse/datasets/interactionDemo.txt")
save(twoway,        file="D:/RKurse/Dokumentation/crashcouRse/datasets/interactionDemo.rda")
load("D:/RKurse/Dokumentation/crashcouRse/datasets/interactionDemo.rda")
rm(list=ls())
library(data.table)
library(RColorBrewer)
farben <- c("#AD009F", "#F80012", "#4512AE")
temp <- data.table(Var=c("A", "A", "B", "B"),
N  =c("N1", "N2", "N1", "N2"))
types <- c("Keine",
"Sorte",
"Dünger",
"Sorte & Dünger (additiv)",
"Sorte & Dünger Interaktion")
mu   <- data.table(type=types[1], temp, mean=c(4,4,4,4)); mu$N  <- "N1 & N2"
var  <- data.table(type=types[2], temp, mean=c(2,2,6,6)); var$N <- "N1 & N2"
N    <- data.table(type=types[3], temp, mean=c(3,5,3,5))
Nvar <- data.table(type=types[4], temp, mean=c(1,3,5,7))
Int  <- data.table(type=types[5], temp, mean=c(5,3,1,7))
twoway <- rbind(mu, var, N, Nvar, Int)
twoway[, Comb := paste0(Var,"-",N)]
twoway$N    <- factor(twoway$N,    levels=c("N1 & N2", "N1", "N2"))
twoway$type <- factor(twoway$type, levels=types)
# ggplot(data=twoway, aes(y=mean, x=Var, col=N, group = N)) +
#   geom_point(size=3) + geom_line(alpha=0.5, linetype="dotted", size=1) +
#   scale_color_manual(values=farben) +
#   geom_hline(yintercept=4, col="gray", linetype="dashed") +
#   ylim(0,8) + facet_wrap( ~ type, ncol = 2) +
#   theme_bw() + theme(panel.grid = element_blank(),
#                      legend.title = element_blank(),
#                      legend.position = c(0.75, 0.15)) +
#   labs(y="Mittlerer Ertrag", x="Sorte")
fwrite(twoway, sep="\t", "D:/RKurse/Dokumentation/crashcouRse/datasets/interactionDemo.txt")
save(twoway,        file="D:/RKurse/Dokumentation/crashcouRse/datasets/interactionDemo.rda")
setwd("D:/RKurse/Dokumentation/crashcouRse")
library("rmarkdown")
rmarkdown::clean_site()  # delete old files
rmarkdown::render_site(encoding="UTF-8") # render all files new; UTF-8 for ä, ö, ü, ß
library(agridat)
library(data.table)
data(rothamsted.brussels); dat <- rothamsted.brussels
rm(list=ls()[! ls() %in% c("dat")])
library(agridat)
library(data.table)
data(rothamsted.brussels); dat <- rothamsted.brussels
rm(list=ls()[! ls() %in% c("dat")])
desplot(yield~col*row, data=dat,
num=trt, out1=block, cex=1, # aspect unknown
main="rothamsted.brussels")
dat
library(agridat)
library(data.table)
data(rothamsted.brussels); dat <- rothamsted.brussels
rm(list=ls()[! ls() %in% c("dat")])
library(agridat)
library(data.table)
data(rothamsted.brussels); dat <- rothamsted.brussels
rm(list=ls()[! ls() %in% c("dat")])
names(dat) <- c("row", "col", "yield", "N", "block")
setcolorder(dat, c("N", "block", "yield", "row", "col"))
desplot(yield~col*row, data=dat,
num=trt, out1=block, cex=1, # aspect unknown
main="rothamsted.brussels")
library(agridat)
library(data.table)
data(rothamsted.brussels); dat <- rothamsted.brussels
rm(list=ls()[! ls() %in% c("dat")])
names(dat) <- c("row", "col", "yield", "N", "block")
setcolorder(dat, c("N", "block", "yield", "row", "col"))
desplot(N~col*row, data=dat,
num=N, out1=block, cex=1, # aspect unknown
main="rothamsted.brussels")
library(agridat)
library(data.table)
data(rothamsted.brussels); dat <- rothamsted.brussels
rm(list=ls()[! ls() %in% c("dat")])
names(dat) <- c("row", "col", "yield", "N", "block")
setcolorder(dat, c("N", "block", "yield", "row", "col"))
library(RColorBrewer)
library(desplot)
Ncolors <- brewer.pal(9, "Greens")
desplot(N~col*row, data=dat,
text=N, col.regions=Ncolors,
out1=block, cex=1,
main="")
levels(dat$N)
rm(list=ls())
library(dplyr)
rice <- fread("D:/RKurse/DataPiepho/rice.dat.txt")
rice <- rice[, c(1,2,3,5)]
names(rice) <- c("rep", "N", "G", "yield")
#rice[, col := as.numeric(NA)]
# Manually obtain column numbers from Piepho's mixed model script
col.rep.1 <- data.table(rep=1, N=seq(1:6), col1=c(1,2,5,3,6,4)   )
col.rep.2 <- data.table(rep=2, N=seq(1:6), col2=c(4,2,1,6,3,5)+6 )
col.rep.3 <- data.table(rep=3, N=seq(1:6), col3=c(4,5,3,1,6,2)+12)
rice <- merge(rice, col.rep.1, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.2, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.3, by=c("rep", "N"), all.x=T)
rice[, col := rowSums(.SD, na.rm=T), .SDcols=c("col1", "col2", "col3")]
rice[, `:=` (col1=NULL, col2=NULL, col3=NULL)]
rice[, mainplot := as.factor(paste0("mp", col))]
# Manually obtain row numbers from Piepho's mixed model script
row.rep.1 <- c(4,2,1,3,
2,4,3,1,
1,3,4,2,
2,4,1,3,
2,1,3,4,
1,3,4,2) %>% data.table(rep=1, row=., G=rep(seq(1:4),6), col=sort(rep(0+seq(1:6),4)))
row.rep.2 <- c(2,1,4,3,
4,1,3,2,
4,1,2,3,
3,4,2,1,
2,4,1,3,
1,4,2,3) %>% data.table(rep=2, row=., G=rep(seq(1:4),6), col=sort(rep(6+seq(1:6),4)))
row.rep.3 <- c(1,3,4,2,
1,2,4,3,
4,3,2,1,
1,4,2,3,
1,3,4,2,
2,4,1,3) %>% data.table(rep=3, row=., G=rep(seq(1:4),6), col=sort(rep(12+seq(1:6),4)))
row.info <- rbind(row.rep.1, row.rep.2, row.rep.3)
rice <- merge(rice, row.info, by=c("rep", "G", "col"))
setcolorder(rice, c("row", "col", "rep", "mainplot", "N", "G", "yield"))
rice$G   <- rice$G   %>% as.factor;      levels(rice$G) <- c("A", "B", "C", "D")
rice$N   <- rice$N   %>% paste0("N",.)   %>% as.factor
rice$rep <- rice$rep %>% paste0("rep",.) %>% as.factor
head(rice)
splitplot <- rice
# fwrite(splitplot, sep="\t", "D:/RKurse/Dokumentation/crashcouRse/datasets/rice split plot.txt")
# save(splitplot,        file="D:/RKurse/Dokumentation/crashcouRse/datasets/rice split plot.rda")
library(desplot)
library(RColorBrewer)
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan", xlab="", ylab="",
out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
rice$col
rice[rep==1,]
rice[rep==1, col]
rice[rep=="1", col]
rice[rep=="1", ]
rice[rep=="rep1", ]
rice[rep=="rep1", col]
rice[rep=="rep1", col] <- c(2,4,1,3,5,6,
1,2,4,3,6,5,
6,4,5,1,2,3)
rice[rep=="rep1", col]
rice[rep=="rep1", col] <- c(2,4,1,3,5,6,
1,2,4,3,6,5,
6,4,5,1,2,3,
3,5,1,4,2,6)
c(2,4,1,3,5,6,
1,2,4,3,6,5,
6,4,5,1,2,3,
3,5,1,4,2,6)
rice[rep=="rep1", col]
rice[rep=="rep1", col] <- c(2,4,1,3,5,6,
1,2,4,3,6,5,
6,4,5,1,2,3,
3,5,1,4,2,6)
rice[rep=="rep1", .col] <- c(2,4,1,3,5,6,
1,2,4,3,6,5,
6,4,5,1,2,3,
3,5,1,4,2,6)
rice$col2 <- c(c1,c1,c1)
c1 <- c(2,4,1,3,5,6,
1,2,4,3,6,5,
6,4,5,1,2,3,
3,5,1,4,2,6)
rice$col2 <- c(c1,c1,c1)
desplot(data=rice, form= rep ~ col2+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan", xlab="", ylab="",
out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
rice[, c("row", "col")]
rice[, c("row", "col", "yield")]
x <- rice[, c("row", "col", "yield")]
x[order(yield)]
x <- rice[, c("row", "col", "yield")]
x <- x[order(yield)]
riceRCBD <- rice
riceRCBD$row <- x$row
riceRCBD$col <- x$col
desplot(data=riceRCBD, form= rep ~ col2+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan", xlab="", ylab="",
out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
x <- rice[, c("row", "col","rep", "yield")]
x <- x[order(rep, yield)]
x <- rice[, c("row", "col","rep", "yield")]
x <- x[order(rep, yield)]
riceRCBD <- rice
riceRCBD$row <- x$row
riceRCBD$col <- x$col
desplot(data=riceRCBD, form= rep ~ col2+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan", xlab="", ylab="",
out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
x <- rice[, c("row", "col", "rep", "yield")]
x
x <- x[order(rep, yield)]
x
riceRCBD <- rice[order(rep)]
riceRCBD
riceRCBD$row <- x$row
riceRCBD$col <- x$col
desplot(data=riceRCBD, form= rep ~ col2+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan", xlab="", ylab="",
out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
riceRCBD
x <- rice[, c("row", "col", "rep", "yield")]
x <- x[order(rep, yield)]
x
riceRCBD <- rice[order(rep)]
riceRCBD
riceRCBD$row
x$row
riceRCBD$row <- x$row
riceRCBD$col <- x$col
riceRCBD
desplot(data=riceRCBD, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan", xlab="", ylab="",
out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
riceRCBD <- as.data.table(riceRCBD)
rm(list=ls())
library(dplyr)
rice <- fread("D:/RKurse/DataPiepho/rice.dat.txt")
rice <- rice[, c(1,2,3,5)]
names(rice) <- c("rep", "N", "G", "yield")
#rice[, col := as.numeric(NA)]
# Manually obtain column numbers from Piepho's mixed model script
col.rep.1 <- data.table(rep=1, N=seq(1:6), col1=c(1,2,5,3,6,4)   )
col.rep.2 <- data.table(rep=2, N=seq(1:6), col2=c(4,2,1,6,3,5)+6 )
col.rep.3 <- data.table(rep=3, N=seq(1:6), col3=c(4,5,3,1,6,2)+12)
rice <- merge(rice, col.rep.1, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.2, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.3, by=c("rep", "N"), all.x=T)
rice[, col := rowSums(.SD, na.rm=T), .SDcols=c("col1", "col2", "col3")]
rice[, `:=` (col1=NULL, col2=NULL, col3=NULL)]
rice[, mainplot := as.factor(paste0("mp", col))]
# Manually obtain row numbers from Piepho's mixed model script
row.rep.1 <- c(4,2,1,3,
2,4,3,1,
1,3,4,2,
2,4,1,3,
2,1,3,4,
1,3,4,2) %>% data.table(rep=1, row=., G=rep(seq(1:4),6), col=sort(rep(0+seq(1:6),4)))
row.rep.2 <- c(2,1,4,3,
4,1,3,2,
4,1,2,3,
3,4,2,1,
2,4,1,3,
1,4,2,3) %>% data.table(rep=2, row=., G=rep(seq(1:4),6), col=sort(rep(6+seq(1:6),4)))
row.rep.3 <- c(1,3,4,2,
1,2,4,3,
4,3,2,1,
1,4,2,3,
1,3,4,2,
2,4,1,3) %>% data.table(rep=3, row=., G=rep(seq(1:4),6), col=sort(rep(12+seq(1:6),4)))
row.info <- rbind(row.rep.1, row.rep.2, row.rep.3)
rice <- merge(rice, row.info, by=c("rep", "G", "col"))
setcolorder(rice, c("row", "col", "rep", "mainplot", "N", "G", "yield"))
rice$G   <- rice$G   %>% as.factor;      levels(rice$G) <- c("A", "B", "C", "D")
rice$N   <- rice$N   %>% paste0("N",.)   %>% as.factor
rice$rep <- rice$rep %>% paste0("rep",.) %>% as.factor
head(rice)
splitplot <- rice
# fwrite(splitplot, sep="\t", "D:/RKurse/Dokumentation/crashcouRse/datasets/rice split plot.txt")
# save(splitplot,        file="D:/RKurse/Dokumentation/crashcouRse/datasets/rice split plot.rda")
library(desplot)
library(RColorBrewer)
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan", xlab="", ylab="",
out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
# artificially rerandomize within blocks to obtain RCBD
x <- rice[, c("row", "col", "rep", "yield")]
x <- x[order(rep, yield)]
riceRCBD <- rice[order(rep)]
riceRCBD$row <- x$row
riceRCBD$col <- x$col
desplot(data=riceRCBD, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan", xlab="", ylab="",
out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
riceRCBD <- as.data.table(riceRCBD)
riceRCBD$mainplot <- NULL
rm(list=ls())
library(dplyr)
rice <- fread("D:/RKurse/DataPiepho/rice.dat.txt")
rice <- rice[, c(1,2,3,5)]
names(rice) <- c("rep", "N", "G", "yield")
#rice[, col := as.numeric(NA)]
# Manually obtain column numbers from Piepho's mixed model script
col.rep.1 <- data.table(rep=1, N=seq(1:6), col1=c(1,2,5,3,6,4)   )
col.rep.2 <- data.table(rep=2, N=seq(1:6), col2=c(4,2,1,6,3,5)+6 )
col.rep.3 <- data.table(rep=3, N=seq(1:6), col3=c(4,5,3,1,6,2)+12)
rice <- merge(rice, col.rep.1, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.2, by=c("rep", "N"), all.x=T)
rice <- merge(rice, col.rep.3, by=c("rep", "N"), all.x=T)
rice[, col := rowSums(.SD, na.rm=T), .SDcols=c("col1", "col2", "col3")]
rice[, `:=` (col1=NULL, col2=NULL, col3=NULL)]
rice[, mainplot := as.factor(paste0("mp", col))]
# Manually obtain row numbers from Piepho's mixed model script
row.rep.1 <- c(4,2,1,3,
2,4,3,1,
1,3,4,2,
2,4,1,3,
2,1,3,4,
1,3,4,2) %>% data.table(rep=1, row=., G=rep(seq(1:4),6), col=sort(rep(0+seq(1:6),4)))
row.rep.2 <- c(2,1,4,3,
4,1,3,2,
4,1,2,3,
3,4,2,1,
2,4,1,3,
1,4,2,3) %>% data.table(rep=2, row=., G=rep(seq(1:4),6), col=sort(rep(6+seq(1:6),4)))
row.rep.3 <- c(1,3,4,2,
1,2,4,3,
4,3,2,1,
1,4,2,3,
1,3,4,2,
2,4,1,3) %>% data.table(rep=3, row=., G=rep(seq(1:4),6), col=sort(rep(12+seq(1:6),4)))
row.info <- rbind(row.rep.1, row.rep.2, row.rep.3)
rice <- merge(rice, row.info, by=c("rep", "G", "col"))
setcolorder(rice, c("row", "col", "rep", "mainplot", "N", "G", "yield"))
rice$G   <- rice$G   %>% as.factor;      levels(rice$G) <- c("A", "B", "C", "D")
rice$N   <- rice$N   %>% paste0("N",.)   %>% as.factor
rice$rep <- rice$rep %>% paste0("rep",.) %>% as.factor
head(rice)
splitplot <- rice
# fwrite(splitplot, sep="\t", "D:/RKurse/Dokumentation/crashcouRse/datasets/rice split plot.txt")
# save(splitplot,        file="D:/RKurse/Dokumentation/crashcouRse/datasets/rice split plot.rda")
library(desplot)
library(RColorBrewer)
desplot(data=rice, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan", xlab="", ylab="",
out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
# artificially rerandomize within blocks to obtain RCBD
x <- rice[, c("row", "col", "rep", "yield")]
x <- x[order(rep, yield)]
riceRCBD <- rice[order(rep)]
riceRCBD$mainplot <- NULL
riceRCBD$row <- x$row
riceRCBD$col <- x$col
desplot(data=riceRCBD, form= rep ~ col+row|rep, flip=T,
text=G, cex=1, col=N,
col.regions=c("grey100", "grey90", "grey80"),
col.text=brewer.pal(6, "Dark2"),
main="Feldplan", xlab="", ylab="",
out1=row, out1.gpar=list(col="grey50", lwd=1, lty=1),
out2=col, out2.gpar=list(col="grey50", lwd=1, lty=1))
riceRCBD <- as.data.table(riceRCBD)
fwrite(riceRCBD, sep="\t", "D:/RKurse/Dokumentation/crashcouRse/datasets/rice RCBD.txt")
save(riceRCBD,        file="D:/RKurse/Dokumentation/crashcouRse/datasets/rice RCBD.rda")
load("D:/RKurse/Dokumentation/crashcouRse/datasets/rice RCBD.rda")
riceRCBD <- riceRCBD[,c("N", "G", "rep", "yield")]
setwd("D:/RKurse/Dokumentation/crashcouRse")
library("rmarkdown")
rmarkdown::clean_site()  # delete old files
rmarkdown::render_site(encoding="UTF-8") # render all files new; UTF-8 for ä, ö, ü, ß
setwd("D:/RKurse/Dokumentation/crashcouRse")
library("rmarkdown")
rmarkdown::clean_site()  # delete old files
rmarkdown::render_site(encoding="UTF-8") # render all files new; UTF-8 for ä, ö, ü, ß
setwd("D:/RKurse/Dokumentation/crashcouRse")
library("rmarkdown")
rmarkdown::clean_site()  # delete old files
rmarkdown::render_site(encoding="UTF-8") # render all files new; UTF-8 for ä, ö, ü, ß
